<!-- Hero Section -->
<section class="hero">
  <h1>{{ site.tagline }}</h1>
  <p>{{ seo.description }}</p>
  <div class="search">
    <input id="q" type="search" placeholder="Search products, brands, categories..." autocomplete="off">
    <a class="btn secondary" href="/products/index.html">Browse All</a>
  </div>
  <p class="muted mt-lg">
    <small>💡 Tip: Press "/" to quickly search</small>
  </p>
</section>

<!-- Stats Section -->
<section class="text-center mb-xl">
  <div class="grid grid-3">
    <div class="card">
      <h3 class="mb-sm">🔄</h3>
      <h4>Daily Updates</h4>
      <p class="muted mb-0">Fresh products added automatically</p>
    </div>
    <div class="card">
      <h3 class="mb-sm">🛡️</h3>
      <h4>Secure Checkout</h4>
      <p class="muted mb-0">Safe payments through partner sites</p>
    </div>
    <div class="card">
      <h3 class="mb-sm">⚡</h3>
      <h4>Best Deals</h4>
      <p class="muted mb-0">Curated products at great prices</p>
    </div>
  </div>
</section>

<!-- Featured Products -->
<section>
  <h2>Featured Products</h2>
  {% if products %}
  <div class="grid grid-3" id="featured">
    {% for p in products[:6] %}
    <div class="card">
      <img src="{{ p.thumbnail_url }}" alt="{{ p.title }}" loading="lazy">
      <div>
        <h3><a href="/products/{{ p.slug }}.html">{{ p.title }}</a></h3>
        <div class="mb-md">
          {% for t in p.tags[:3] %}
          <span class="tag">#{{ t }}</span>
          {% endfor %}
        </div>
        <div class="price">${{ p.price }}</div>
        <a class="btn" href="{{ p.product_url }}" target="_blank" rel="noopener nofollow">
          Buy Now
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="text-center">
    <p class="muted">Products are being updated. Check back soon!</p>
  </div>
  {% endif %}
  
  <div class="text-center mt-xl">
    <a class="btn large secondary" href="/products/index.html">
      View All Products →
    </a>
  </div>
</section>

<!-- Categories Section -->
{% if products %}
<section>
  <h2>Shop by Category</h2>
  <div class="grid grid-4">
    {% set categories = {} %}
    {% for p in products %}
      {% for tag in p.tags %}
        {% if categories.update({tag: (categories.get(tag, 0) + 1)}) %}{% endif %}
      {% endfor %}
    {% endfor %}
    
    <!-- Popular categories (you can customize this based on your products) -->
    <a href="/products/index.html?q=audio" class="card">
      <h4>🎧 Audio</h4>
      <p class="muted mb-0">Headphones, speakers & more</p>
    </a>
    <a href="/products/index.html?q=camera" class="card">
      <h4>📸 Cameras</h4>
      <p class="muted mb-0">Action cams & photography gear</p>
    </a>
    <a href="/products/index.html?q=charger" class="card">
      <h4>🔌 Charging</h4>
      <p class="muted mb-0">Chargers, cables & power banks</p>
    </a>
    <a href="/products/index.html?q=deal" class="card">
      <h4>🏷️ Deals</h4>
      <p class="muted mb-0">Best discounts & offers</p>
    </a>
  </div>
</section>
{% endif %}

<!-- Latest Blog Posts -->
{% if posts %}
<section>
  <h2>Latest Updates</h2>
  <div class="grid grid-2">
    {% for post in posts[:4] %}
    <div class="card">
      <h3><a href="/blog/{{ post.slug }}.html">{{ post.title }}</a></h3>
      <p class="muted">{{ post.summary }}</p>
      <div class="mb-md">
        {% for tag in post.tags %}
        <span class="tag">#{{ tag }}</span>
        {% endfor %}
      </div>
      <a class="btn secondary small" href="/blog/{{ post.slug }}.html">Read More</a>
    </div>
    {% endfor %}
  </div>
  
  <div class="text-center mt-xl">
    <a class="btn secondary" href="/blog/index.html">
      View All Posts →
    </a>
  </div>
</section>
{% endif %}

<!-- Newsletter/CTA Section -->
<section class="hero">
  <h2>Stay Updated</h2>
  <p>Get notified about new products and exclusive deals</p>
  <div class="search">
    <input type="email" placeholder="Enter your email address" id="newsletter-email">
    <button class="btn" onclick="subscribeNewsletter()">Subscribe</button>
  </div>
  <p class="muted mt-md">
    <small>We respect your privacy. Unsubscribe at any time.</small>
  </p>
</section>

<script>
// Enhanced homepage functionality
(function() {
  // Newsletter subscription (placeholder - integrate with your email service)
  window.subscribeNewsletter = function() {
    const email = document.getElementById('newsletter-email').value;
    if (!email || !email.includes('@')) {
      alert('Please enter a valid email address');
      return;
    }
    
    // Replace with your actual newsletter signup logic
    alert('Thanks for subscribing! (This is a demo - integrate with your email service)');
    document.getElementById('newsletter-email').value = '';
  };
  
  // Enhanced search with suggestions
  const searchInput = document.getElementById('q');
  if (searchInput) {
    let searchTimeout;
    
    searchInput.addEventListener('input', function() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        // You can add search suggestions here
        console.log('Search query:', this.value);
      }, 300);
    });
  }
  
  // Animate cards on scroll (optional)
  if ('IntersectionObserver' in window) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, { threshold: 0.1 });
    
    document.querySelectorAll('.card').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
      observer.observe(card);
    });
  }
})();
</script>